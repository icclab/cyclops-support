define("org/forgerock/openam/ui/common/delegates/SiteConfigurationDelegate",["org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/AbstractDelegate","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/openam/ui/common/util/RealmHelper"],function(e,t,n,r,i,s){var o=new t(e.host+"/"+e.context),u="/";return o.getConfiguration=function(e,t){console.info("Getting configuration"),o.serviceCall({headers:{"Accept-API-Version":"protocol=1.0,resource=1.1"},url:"/json/serverinfo/*",success:function(t){var n=location.hostname,r=t.FQDN,s=i.getUrl();n!==r?location.href=s.replace(n,r):e(t)},error:t})},o.checkForDifferences=function(t,r){var a=_.indexOf(t.argumentNames,"realm"),f=i.convertCurrentUrlToJSON().params;return f&&typeof f.realm=="string"&&f.realm!==""?(n.globalData.auth.realm=f.realm,n.globalData.auth.realm[0]!=="/"&&(n.globalData.auth.realm="/"+n.globalData.auth.realm)):a!==-1&&r[a]!==undefined&&r[a]!==null&&(n.globalData.auth.realm=r[a]),u!==n.globalData.auth.realm?(u=s.cleanRealm(n.globalData.auth.realm),o.serviceCall({type:"GET",headers:{"Accept-API-Version":"protocol=1.0,resource=1.1"},url:"/json"+u+"/serverinfo/*",errorsHandlers:{unauthorized:{status:"401"},"Bad Request":{status:"400",event:e.EVENT_INVALID_REALM}}})):$.Deferred().resolve()},o})