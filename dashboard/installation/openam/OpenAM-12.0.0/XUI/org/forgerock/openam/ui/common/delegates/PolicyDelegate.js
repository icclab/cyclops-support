define("org/forgerock/openam/ui/common/delegates/PolicyDelegate",["org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/AbstractDelegate"],function(e,t){var n=new t("/policy");return n.readEntity=function(e,t){var n=$.Deferred(),r={required:'\nfunction (fullObject, value, params, propName) {\n    if (value === undefined) {\n        return [{"policyRequirement":"REQUIRED"}];\n    }\n    return [];\n}\n',"not-empty":'\nfunction (fullObject, value, params, property) {\n    if (value !== undefined && (value === null || !value.length)) {\n        return [{"policyRequirement":"REQUIRED"}];\n    } else {\n        return [];\n    }\n}\n',"valid-phone-format":'\nfunction (fullObject, value, params, property) {\n    var phonePattern = /^\\+?([0-9\\- \\(\\)])*$/;\n    \n        if (typeof(value) === "string" && value.length && !phonePattern.test(value)) {\n            return [ {"policyRequirement": "VALID_PHONE_FORMAT"}];\n        } else {\n            return [];\n        }\n    }',"valid-email-address-format":'\nfunction (fullObject, value, params, property) {\n    var emailPattern = /^([A-Za-z0-9_\\-\\.])+\\@([A-Za-z0-9_\\-\\.])+\\.([A-Za-z]{2,4})$/; \n        \n        if (typeof(value) === "string" && value.length && !emailPattern.test(value)) {\n            return [ {"policyRequirement": "VALID_EMAIL_ADDRESS_FORMAT"}];\n        } else {\n            return [];\n        }\n    }'},i={};return e.match(new RegExp("users/[^/]+$"))&&(i={resource:e,properties:[{policyRequirements:["REQUIRED"],policies:[{policyRequirements:["REQUIRED"],policyId:"required",policyFunction:r.required},{policyRequirements:["REQUIRED"],policyId:"not-empty",policyFunction:r["not-empty"]}],name:"uid"},{policyRequirements:["VALID_EMAIL_ADDRESS_FORMAT"],policies:[{policyRequirements:["VALID_EMAIL_ADDRESS_FORMAT"],policyId:"valid-email-address-format",policyFunction:r["valid-email-address-format"]}],name:"mail"},{policyRequirements:["REQUIRED"],policies:[{policyRequirements:["REQUIRED"],policyId:"required",policyFunction:r.required},{policyRequirements:["REQUIRED"],policyId:"not-empty",policyFunction:r["not-empty"]}],name:"sn"},{policyRequirements:["VALID_PHONE_FORMAT"],policies:[{policyRequirements:["VALID_PHONE_FORMAT"],policyId:"valid-phone-format",policyFunction:r["valid-phone-format"]}],name:"telephoneNumber"}]}),n.resolve(i),t&&t(i),n},n})