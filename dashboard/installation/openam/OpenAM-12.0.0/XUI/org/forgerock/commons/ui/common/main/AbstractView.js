define("org/forgerock/commons/ui/common/main/AbstractView",["jquery","underscore","backbone","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/commons/ui/common/main/ValidatorsManager","org/forgerock/commons/ui/common/util/ValidatorsUtils","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/util/Constants","ThemeManager"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.View.extend({element:"#content",baseTemplate:"templates/common/DefaultBaseTemplate.html",mode:"replace",formLock:!1,data:{},parentRender:function(n){this.callback=n;var i=this,s=function(){return o.baseTemplate!==i.baseTemplate&&!i.noBaseTemplate};u.registerListener(f.EVENT_REQUEST_RESEND_REQUIRED,function(){i.unlock()}),l.getTheme().then(function(n){i.data.theme=n,s()?r.renderTemplate(i.data.theme.path+i.baseTemplate,e("#wrapper"),t.extend({},o.globalData,i.data),t.bind(i.loadTemplate,i),"replace",s):i.loadTemplate()})},loadTemplate:function(){var n=this,i=function(){return t.has(n,"route")?!n.route.url.length&&window.location.hash.replace(/^#/,"")===""?!0:window.location.hash.replace(/^#/,"").match(n.route.url):!0};this.setElement(e(this.element)),this.$el.unbind(),this.delegateEvents(),o.baseTemplate!==this.baseTemplate&&!this.noBaseTemplate&&(o.setProperty("baseTemplate",this.baseTemplate),u.sendEvent(f.EVENT_CHANGE_BASE_VIEW)),this.callback?r.renderTemplate(this.data.theme.path+this.template,this.$el,t.extend({},o.globalData,this.data),t.bind(this.callback,this),this.mode,i):r.renderTemplate(this.data.theme.path+this.template,this.$el,t.extend({},o.globalData,this.data),null,this.mode,i)},rebind:function(){this.setElement(e(this.element)),this.$el.unbind(),this.delegateEvents()},render:function(e,t){this.parentRender(t)},reload:function(){},onValidate:function(e,t,n,r){var o=this.$el.find("input[type=submit]");if(n==="inProgress")return;o.length||(o=this.$el.find("#submit")),i.formValidated(this.$el)?(o.prop("disabled",!1),this.$el.find(".input-validation-message").hide()):(o.prop("disabled",!0),this.$el.find(".input-validation-message").show());if(n==="disabled"){s.hideValidation(t,this.$el);return}s.showValidation(t,this.$el),t.nextAll("span")&&s.setTick(t,n),t.nextAll("div.validation-message:first").attr("for",t.attr("id")).html(n?n:""),t.parents(".separate-message").children("div.validation-message:first").attr("for",t.attr("id")).html(n?n:""),n?(t.parents(".separate-message").addClass("invalid"),t.addClass("invalid")):(t.parents(".separate-message").removeClass("invalid"),t.removeClass("invalid")),this.$el.find("div.validation-message[for='"+t.attr("name")+"']").html(n?n:""),r&&s.setErrors(this.$el,r,n),this.$el.trigger("customValidate",[t,n,r])},lock:function(){this.formLock=!0},unlock:function(){this.formLock=!1},isFormLocked:function(){return this.formLock}});return c})