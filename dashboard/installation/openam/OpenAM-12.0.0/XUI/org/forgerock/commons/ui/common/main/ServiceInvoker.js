define("org/forgerock/commons/ui/common/main/ServiceInvoker",["jquery","org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/util/ObjectUtil","org/forgerock/commons/ui/common/main/AbstractConfigurationAware"],function(e,t,n,r,i){var s=new i;return s.restCall=function(r){var i=this,o,u,a,f=!1;return f=r.hasOwnProperty("dataType")&&r.dataType!=="json",f||(r.contentType="application/json"),o=r,s.applyDefaultHeadersIfNecessary(o,s.configuration.defaultHeaders),o.headers[t.HEADER_PARAM_NO_SESSION]===!1&&delete o.headers[t.HEADER_PARAM_NO_SESSION],n.sendEvent(t.EVENT_START_REST_CALL,{suppressSpinner:r.suppressSpinner}),u=o.success,a=o.error,o.success=function(r,i,s){r&&r.error?(n.sendEvent(t.EVENT_REST_CALL_ERROR,{data:e.extend({},r,{type:this.type}),textStatus:i,jqXHR:s,errorsHandlers:o.errorsHandlers}),a&&a(r)):(n.sendEvent(t.EVENT_END_REST_CALL,{data:r,textStatus:i,jqXHR:s}),u&&u(r))},o.error=function(r,i,s){n.sendEvent(t.EVENT_REST_CALL_ERROR,{data:e.extend({},r,{type:this.type}),textStatus:i,errorThrown:s,errorsHandlers:o.errorsHandlers}),a&&a(r)},f||(o.dataType="json",o.contentType="application/json"),o.xhrFields={withCredentials:!0},o.headers["X-Requested-With"]="XMLHttpRequest",e.ajax(o)},s.applyDefaultHeadersIfNecessary=function(e,t){var n;if(!t)return;if(!e.headers)e.headers=t;else for(n in t)e.headers[n]===undefined&&(e.headers[n]=t[n])},s})