define("org/forgerock/commons/ui/common/util/FormGenerationUtils",["jquery","org/forgerock/commons/ui/common/util/DateUtil"],function(e,t){var n={};return n.standardErrorSpan='<span class="error">x</span>',n.standardErrorMessageTag='<div class="validation-message"></div>',n.generateTemplateFromFormProperties=function(e,t){var r,i="",s,o,u;for(u=0;u<e.formProperties.length;u++)o=e.formProperties[u],o.value=n.getValueForKey(o._id,t),o._id!=="_formGenerationTemplate"&&(s=o.type,i+=this.generateTemplateLine(o._id,o));return i},n.getValueForKey=function(e,t){var n,r;if(!t)return null;for(n=0;n<t.length;n++){r=t[n];if(r[e])return r[e]}},n.generateTemplateLine=function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v;u=t.readable,a=t.writable&&t.readable,f=t.required&&t.writable&&t.readable,l=t.type,o=t.name,h=t.variableName?t.variableName:e,c=t.variableExpression?t.variableExpression.expressionText:null,p=t.defaultExpression?t.defaultExpression.expressionText:null,d=t.value?t.value:null,d?s=d:c?s=c:p&&(s=p),s&&(r=s.replace(/\$\{/g,"{{variables."),r=r.replace(/\}/g,"}}"));if(!l||!l.name||l.name==="string")return this.generateStringTypeField(h,o,r,u,a,f);if(l.name==="enum")return this.generateEnumTypeField(h,o,l.values,r,u,a,f);if(l.name==="long")return this.generateLongTypeField(h,o,r,u,a,f);if(l.name==="boolean")return this.generateBooleanTypeField(h,o,r,u,a,f);if(l.name==="date")return v=l.datePattern,this.generateDateTypeField(h,o,r,u,a,f,v)},n.generateDateTypeField=function(e,t,r,i,s,o,u){var a='<div class="field">',f="</div>",l="",c,h,p;return i&&(l=this.generateLabel(t)),r&&r.startsWith("{{variables.")&&(r="{{date "+r.substring(2).removeLastChars(2)+" '"+u+"'}}"),h=this.generateInput("dateFormat",u,!1,!1,!1),c=this.generateInput(e,r,i,s,o,"formattedDate"),p=i&&s?n.standardErrorSpan+n.standardErrorMessageTag:"",a+l+c+p+h+f},n.generateBooleanTypeField=function(t,r,i,s,o,u){var a={"true":e.t("common.form.true"),"false":e.t("common.form.false"),__null:" "};return n.generateEnumTypeField(t,r,a,i,s,o,u)},n.generateEnumTypeField=function(e,t,r,i,s,o,u){var a='<div class="field">',f="</div>",l="",c,h="",p,d;return h=u?h+' data-validator="required" ':"",h=o?h:h+' disabled="disabled" ',h=s?h:h+' style="display: none" ',p=i?i:"__null",p.startsWith("{{variables.")?p=p.substring(2).removeLastChars(2):p="'"+p+"'",r.__null=" ",s&&(l=this.generateLabel(t)),c="{{select '"+JSON.stringify(r)+"' '"+e+"' "+p+" '' '"+h+"' }}",d=u&&o?n.standardErrorSpan+n.standardErrorMessageTag:"",a+l+c+d+f},n.generateStringTypeField=function(e,t,r,i,s,o){var u='<div class="field">',a="</div>",f="",l,c;return i&&(f=this.generateLabel(t)),l=this.generateInput(e,r,i,s,o),c=o&&s?n.standardErrorSpan+n.standardErrorMessageTag:"",u+f+l+c+a},n.generateLongTypeField=function(e,t,r,i,s,o){var u='<div class="field">',a="</div>",f="",l,c;return i&&(f=this.generateLabel(t)),l=this.generateInput(e,r,i,s,o,"long"),c=i&&s?n.standardErrorSpan+n.standardErrorMessageTag:"",u+f+l+c+a},n.generateInput=function(e,t,n,r,i,s){var o=r?"":'disabled="disabled"',u=n?"":'style="display: none"',a,f="required";return s&&(i?f=f+"_"+s:f=s),a=i||s?'data-validator="'+f+'"':"",t||(t=""),'<input type="text" name="'+e+'" value="'+t+'" '+o+" "+u+" "+a+" />"},n.generateLabel=function(e){return'<label class="light">'+e+"</label>"},n.buildPropertyTypeMap=function(e){var t,n,r,i,s,o={},u,a;for(u=0;u<e.length;u++)s=e[u],s._id!=="_formGenerationTemplate"&&(i=s.type,!i||!i.name||i.name===""?t="string":(t=i.name,t==="date"&&(n=i.datePattern)),a=s.variableName?s.variableName:s._id,o[a]={type:t,datePattern:n});return o},n.changeParamsToMeetTheirTypes=function(e,n){var r,i,s,o,u;for(r in e)i=n[r].type,s=e[r],"date"===i?s===""?e[r]=null:(o=n[r].datePattern,u=t.parseDateString(s,o),e[r]=u):"long"===i?s===""?e[r]=null:e[r]=parseInt(s,10):"boolean"===i&&(s===""?e[r]=null:e[r]="true"===s?!0:!1)},n})