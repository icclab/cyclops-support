define("org/forgerock/commons/ui/common/components/Navigation",["jquery","underscore","backbone","org/forgerock/commons/ui/common/main/AbstractConfigurationAware","org/forgerock/commons/ui/common/main/AbstractView","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/main/ViewManager","org/forgerock/commons/ui/common/main/Router"],function(e,t,n,r,i,s,o,u,a,f){var l=new r;return l.init=function(){var n=i.extend({element:"#menu",template:"templates/common/NavigationTemplate.html",noBaseTemplate:!0,data:{},events:{"click a.inactive":"disableLink"},disableLink:function(e){e.preventDefault()},render:function(){this.reload(),this.parentRender()},addLinks:function(e){var t,n,r,i,s;for(n in l.configuration.links[e].urls){t=l.configuration.links[e].urls[n];if(this.isCurrent(t.url)||this.isCurrent(t.baseUrl)||this.childIsCurrent(t.urls)){this.addLink(t.name,t.url,!0,t.icon,t.inactive);if(t.urls)for(i in t.urls)r=t.urls[i],this.addSubLink(r.name,r.url,this.isCurrent(r.url),r.icon,r.inactive)}else this.addLink(t.name,t.url,!1,t.icon,t.inactive)}},addLink:function(t,n,r,i,s){this.data.topNav.push({key:t,hashurl:n,title:e.t(t),isActive:r,isInactive:s,icon:i})},addSubLink:function(t,n,r,i,s){this.data.subNav.push({key:t,hashurl:n,title:e.t(t),isActive:r,isInactive:s,icon:i})},childIsCurrent:function(e){var t;for(t in e)if(this.isCurrent(e[t].url))return!0;return!1},isCurrent:function(e){var t,n=window.location.href.split("#")[1];return n?t="#"+n:t="#/",t.indexOf(e)!==-1},clear:function(){this.data.topNav=[],this.data.subNav=[]},reload:function(){this.clear();var e,n;for(n in l.configuration.links){e=l.configuration.links[n];if(e.role&&s.loggedUser&&t.contains(s.loggedUser.roles,e.role)){this.addLinks(n);return}if(!e.role){this.addLinks(n);return}}}});l.navigation=new n,l.navigation.render()},l.reload=function(){l.navigation&&l.navigation.render()},l})