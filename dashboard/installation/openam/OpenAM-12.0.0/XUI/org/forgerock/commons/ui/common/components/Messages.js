define("org/forgerock/commons/ui/common/components/Messages",["jquery","underscore","backbone","org/forgerock/commons/ui/common/main/AbstractConfigurationAware"],function(e,t,n,r){var i=new r,s;return s=n.View.extend({list:[],el:"#messages",events:{"click div":"removeAndNext"},delay:2500,timer:null,displayMessageFromConfig:function(t){var n=i.messages;typeof t=="object"?typeof t.key=="string"&&n.addMessage({message:e.t(i.configuration.messages[t.key].msg,t),type:i.configuration.messages[t.key].type}):typeof t=="string"&&n.addMessage({message:e.t(i.configuration.messages[t].msg),type:i.configuration.messages[t].type})},addMessage:function(e){var t,n=i.messages;for(t=0;t<n.list.length;t++)if(n.list[t].message===e.message){console.log("duplicated message");return}console.info(e.type+":",e.message,e),n.list.push(e),n.list.length<=1&&n.showMessage(e)},nextMessage:function(){var e=i.messages;e.list.shift(),e.list.length>0&&e.showMessage()},removeAndNext:function(){var t=i.messages;window.clearTimeout(i.messages.timer),t.$el.find("div").fadeOut(300,function(){e(this).remove(),t.nextMessage()})},showMessage:function(){var e=this,t=this.list[0].type==="error"?"errorMessage":"confirmMessage",n=e.delay+this.list[0].message.length*20;this.$el.append("<div class='"+t+"'><span class='error-outter'><span class='error-inner'><span>"+this.list[0].message+"</span></span></span></div>"),this.$el.find("div:last").fadeIn(300,function(){e.timer=window.setTimeout(e.removeAndNext,n)})},hideMessages:function(){var e=i.messages;e.list.length>1&&(e.list=[e.list[1]])}}),i.messages=new s,i})