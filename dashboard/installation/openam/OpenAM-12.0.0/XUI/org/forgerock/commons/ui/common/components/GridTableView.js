define("org/forgerock/commons/ui/common/components/GridTableView",["jquery","backbone"],function(e,t){var n=t.View.extend({items:[],events:{"click li":"onClick",sortupdate:"orderChanged"},render:function(e){var t;this.setElement(e.el),e.items&&(this.items=e.items),this.rebuildView()},generateItemView:function(e){return'<li class="ui-state-default">'+e._id+"</li>"},onClick:function(t){t.preventDefault(),this.removeItemAndRebuild(e(t.target).find("input").val())},getItems:function(){var t=[],n;return this.$el.find("ul li").each(function(){n=e(this).text(),n&&t.push(n)}),t},orderChanged:function(){console.log("Order has changed"),this.items=this.getItems()},removeItemAndRebuild:function(e){var t;for(t=0;t<this.items.length;t++)this.items[t]._id===e&&this.items.splice(t,1);this.rebuildView()},addItemAndRebuild:function(e){return this.itemExists(e._id)?!1:(this.items.push(e),this.rebuildView(),!0)},itemExists:function(e){var t;for(t=0;t<this.items.length;t++)if(this.items[t]._id===e)return!0;return!1},rebuildView:function(){var e;this.$el.find("#sortable").remove(),this.$el.find("#noItemsMessage").remove();if(this.items.length>0){this.$el.append('<ul id="sortable" class="sortable"></ul>'),this.sort();for(e=0;e<this.items.length;e++)this.$el.find("#sortable").append(this.generateItemView(this.items[e]));this.installAdditionalFunctions()}this.$el.find("#sortable").children().size()===0&&this.noItemsMessage()&&this.$el.append('<div id="noItemsMessage" class="offset10">'+this.noItemsMessage()+"</div>"),this.runAfterRebuildSteps()},sort:function(){},runAfterRebuildSteps:function(){},noItemsMessage:function(){return"No items"},installAdditionalFunctions:function(){this.$el.find("#sortable").sortable(),this.$el.find("#sortable").disableSelection()}});return n})