define("org/forgerock/commons/ui/common/SiteConfigurator",["jquery","underscore","org/forgerock/commons/ui/common/main/AbstractConfigurationAware","org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/i18nManager"],function(e,t,n,r,i,s,o){var u=new n;return u.initialized=!1,e(document).on(r.EVENT_READ_CONFIGURATION_REQUEST,function(){var e;s.globalData||(s.setProperty("globalData",{}),s.globalData.auth={}),s.delegateCache||s.setProperty("delegateCache",{}),console.info("READING CONFIGURATION"),u.configuration&&u.initialized===!1&&(u.initialized=!0,u.configuration.remoteConfig===!0?(e=require(u.configuration.delegate),e.getConfiguration(function(e){u.processConfiguration(e),i.sendEvent(r.EVENT_APP_INTIALIZED)},function(){u.processConfiguration({}),i.sendEvent(r.EVENT_APP_INTIALIZED)})):(u.processConfiguration(u.configuration),i.sendEvent(r.EVENT_APP_INTIALIZED)))}),u.processConfiguration=function(e){t.extend(s.globalData,e),e.defaultNotificationType&&(s.defaultType=e.defaultNotificationType),e.notificationTypes&&(s.notificationTypes=e.notificationTypes),e.roles&&(s.globalData.userRoles=e.roles),s.globalData.auth.cookieName=e.cookieName,s.globalData.auth.cookieDomains=e.domains,o.init(e.lang)},u.configurePage=function(t,n){var r=e.Deferred(),i;return u.configuration.remoteConfig===!0?(i=require(u.configuration.delegate),typeof i.checkForDifferences=="function"?i.checkForDifferences(t,n).then(function(e){e&&u.processConfiguration(e),r.resolve()}):r.resolve()):r.resolve(),r},u})