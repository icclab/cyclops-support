define("org/forgerock/commons/ui/common/components/Dialog",["jquery","underscore","org/forgerock/commons/ui/common/main/AbstractView","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/EventManager","org/forgerock/commons/ui/common/main/Configuration"],function(e,t,n,r,i,s,o){var u=n.extend({template:"templates/common/DialogTemplate.html",element:"#dialogs",data:{},mode:"append",events:{"click .dialogCloseCross img":"close","click input[name='close']":"close","click .dialogContainer":"stop"},actions:[{type:"button",name:"close"}],stop:function(e){e.stopPropagation()},show:function(n){this.setElement(e("#dialogs")),this.parentRender(t.bind(function(){this.setElement(this.$el.find(".dialogContainer:last")),e("#dialogs").addClass("show"),e("#dialog-background").addClass("show"),e("#dialog-background").off("click").on("click",t.bind(this.close,this)),t.each(this.actions,t.bind(function(e){this.$el.find(".dialogActions").append("<input type='"+e.type+"' name='"+e.name+"' value='"+e.name+"' class='button float-right' />")},this)),this.loadContent(n)},this))},loadContent:function(e){e?r.renderTemplate(this.data.theme.path+this.contentTemplate,this.$el.find(".dialogContent"),t.extend({},o.globalData,this.data),t.bind(e,this),"append"):r.renderTemplate(this.data.theme.path+this.contentTemplate,this.$el.find(".dialogContent"),t.extend({},o.globalData,this.data),null,"append")},render:function(){this.show()},close:function(t){t&&t.preventDefault(),e(".dialogContainer").length<2&&(e("#dialog-background").removeClass("show"),e("#dialogs").removeClass("show")),s.sendEvent(i.EVENT_DIALOG_CLOSE),this.$el.remove()},addAction:function(e,t){this.getAction(e)||this.actions.push({name:e,type:t})},getAction:function(e){return t.find(this.actions,function(t){return t.name===e})}});return u})