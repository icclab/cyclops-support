define("config/process/CommonConfig",["org/forgerock/commons/ui/common/util/Constants","org/forgerock/commons/ui/common/main/EventManager"],function(e,t){var n=[{startEvent:e.EVENT_APP_INTIALIZED,description:"Starting basic components",dependencies:["org/forgerock/commons/ui/common/components/Navigation","org/forgerock/commons/ui/common/components/popup/PopupCtrl","org/forgerock/commons/ui/common/components/Breadcrumbs","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/util/UIUtils","org/forgerock/commons/ui/common/util/CookieHelper","org/forgerock/commons/ui/common/main/SessionManager"],processDescription:function(n,r,i,s,o,u,a,f,l){s.init(),a.preloadTemplates(),l.getLoggedUser(function(n){u.setProperty("loggedUser",n),t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!1}),o.init()},function(){f.cookiesEnabled()||(location.href="#enableCookies/"),t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!0}),o.init()})}},{startEvent:e.EVENT_CHANGE_BASE_VIEW,description:"",dependencies:["org/forgerock/commons/ui/common/components/Navigation","org/forgerock/commons/ui/common/components/popup/PopupCtrl","org/forgerock/commons/ui/common/components/Breadcrumbs","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/LoggedUserBarView","org/forgerock/commons/ui/common/components/Footer"],processDescription:function(e,t,n,r,i,s,o){t.init(),n.init(),r.buildByUrl(),s.render(),o.render()}},{startEvent:e.EVENT_AUTHENTICATION_DATA_CHANGED,description:"",dependencies:["org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/components/Navigation","org/forgerock/commons/ui/common/LoggedUserBarView"],processDescription:function(n,r,i,s){var o,u;o="org/forgerock/commons/ui/common/main/ServiceInvoker",u=r.getModuleConfiguration(o),n.anonymousMode?(u.defaultHeaders[e.HEADER_PARAM_PASSWORD]=e.ANONYMOUS_PASSWORD,u.defaultHeaders[e.HEADER_PARAM_USERNAME]=e.ANONYMOUS_USERNAME,u.defaultHeaders[e.HEADER_PARAM_NO_SESSION]=!0,r.setProperty("loggedUser",null),s.render(),i.reload()):(delete r.globalData.authorizationFailurePending,delete u.defaultHeaders[e.HEADER_PARAM_PASSWORD],delete u.defaultHeaders[e.HEADER_PARAM_USERNAME],delete u.defaultHeaders[e.HEADER_PARAM_NO_SESSION],t.sendEvent(e.EVENT_AUTHENTICATED)),r.sendSingleModuleConfigurationChangeInfo(o)}},{startEvent:e.EVENT_UNAUTHORIZED,description:"",dependencies:["org/forgerock/commons/ui/common/main/ViewManager","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/SessionManager","org/forgerock/commons/ui/common/util/UIUtils","LoginDialog"],processDescription:function(n,r,i,s,o,u,a){var f=function(){var e=u.getCurrentHash();!s.gotoURL&&!e.match(i.configuration.routes.login.url)&&s.setProperty("gotoURL","#"+e)};if(s.globalData.authorizationFailurePending!==undefined)return;s.globalData.authorizationFailurePending=!0;if(!s.loggedUser){f(),t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!0}),t.sendEvent(e.EVENT_CHANGE_VIEW,{route:i.configuration.routes.login});return}typeof n!="object"||n===null||typeof n.error!="object"||n.error===null||n.error.type==="GET"?(f(),o.logout(function(){t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!0}),t.sendEvent(e.EVENT_DISPLAY_MESSAGE_REQUEST,"unauthorized"),t.sendEvent(e.EVENT_CHANGE_VIEW,{route:i.configuration.routes.login})})):r.showDialog(i.configuration.routes.loginDialog.dialog)}},{startEvent:e.EVENT_DIALOG_CLOSE,description:"",dependencies:["org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/ViewManager","org/forgerock/commons/ui/common/components/Navigation"],processDescription:function(e,t,n,r,i){r.currentDialog="null",n.baseView&&(require(t.configuration.routes[n.baseView].view).rebind(),t.navigate(t.getLink(t.configuration.routes[n.baseView],n.baseViewArgs)),i.reload())}},{startEvent:e.EVENT_REST_CALL_ERROR,description:"",dependencies:["org/forgerock/commons/ui/common/main/SpinnerManager","org/forgerock/commons/ui/common/main/ErrorsHandler"],processDescription:function(e,t,n){n.handleError(e.data,e.errorsHandlers),t.hideSpinner()}},{startEvent:e.EVENT_START_REST_CALL,description:"",dependencies:["org/forgerock/commons/ui/common/main/SpinnerManager"],processDescription:function(e,t){e.suppressSpinner||t.showSpinner()}},{startEvent:e.EVENT_END_REST_CALL,description:"",dependencies:["org/forgerock/commons/ui/common/main/SpinnerManager"],processDescription:function(e,t){t.hideSpinner()}},{startEvent:e.EVENT_CHANGE_VIEW,description:"",dependencies:["org/forgerock/commons/ui/common/main/ViewManager","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/components/Navigation","org/forgerock/commons/ui/common/main/SpinnerManager","org/forgerock/commons/ui/common/SiteConfigurator"],processDescription:function(e,t,n,r,i,s,o){var u=e.route,a=e.args,f=e.callback,l=require(u.view);if(!n.checkRole(u))return;l.route=u,a=a||u.defaults,r.setProperty("baseView",""),r.setProperty("baseViewArgs",""),o.configurePage(u,a).then(function(){s.hideSpinner(10),n.routeTo(u,{trigger:!0,args:a}),t.changeView(u.view,a,f,u.forceUpdate),i.reload()})}},{startEvent:e.EVENT_SHOW_DIALOG,description:"",dependencies:["org/forgerock/commons/ui/common/main/ViewManager","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/components/Navigation"],processDescription:function(e,t,n,r,i){var s=e.route,o=e.args,u=e.callback;if(!n.checkRole(s))return;r.setProperty("baseView",e.base),r.setProperty("baseViewArgs",o),i.init(),!_.has(s,"baseView")&&_.has(s,"base")?t.changeView(n.configuration.routes[s.base].view,t.currentViewArgs,function(){t.showDialog(s.dialog,o,u),n.navigate(n.getLink(s,o))}):t.changeView(s.baseView.view,t.currentViewArgs,function(){t.showDialog(s.dialog,o,u),n.navigate(n.getLink(s,o))})}},{startEvent:e.EVENT_SERVICE_UNAVAILABLE,description:"",dependencies:["org/forgerock/commons/ui/common/main/Router"],processDescription:function(n,r){t.sendEvent(e.EVENT_DISPLAY_MESSAGE_REQUEST,"serviceUnavailable")}},{startEvent:e.ROUTE_REQUEST,description:"",dependencies:["org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/components/Navigation"],processDescription:function(e,t,n){e.trigger===!1?t.routeTo(t.configuration.routes[e.routeName],{trigger:!1,args:e.args}):t.routeTo(t.configuration.routes[e.routeName],{trigger:!0,args:e.args}),n.reload()}},{startEvent:e.EVENT_DISPLAY_MESSAGE_REQUEST,description:"",dependencies:["org/forgerock/commons/ui/common/components/Messages"],processDescription:function(e,t){t.messages.displayMessageFromConfig(e)}},{startEvent:e.EVENT_LOGIN_REQUEST,description:"",dependencies:["org/forgerock/commons/ui/common/main/SessionManager","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/ViewManager"],processDescription:function(n,r,i,s,o){r.login(n,function(n){i.setProperty("loggedUser",n),t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!1});if(!i.backgroundLogin){if(i.globalData.auth.urlParams&&i.globalData.auth.urlParams.goto)return window.location.href=i.globalData.auth.urlParams.goto,!1;if(i.gotoURL&&_.indexOf(["#","","#/","/#"],i.gotoURL)===-1)console.log("Auto redirect to "+i.gotoURL),s.navigate(i.gotoURL,{trigger:!0}),delete i.gotoURL;else{if(!s.checkRole(s.configuration.routes["default"])){t.sendEvent(e.EVENT_UNAUTHORIZED);return}t.sendEvent(e.ROUTE_REQUEST,{routeName:"default",args:[]})}}else o.currentDialog!=="null"&&require(o.currentDialog).close();t.sendEvent(e.EVENT_DISPLAY_MESSAGE_REQUEST,"loggedIn")},function(n){if(i.globalData.auth.urlParams&&i.globalData.auth.urlParams.gotoOnFail)return window.location.href=i.globalData.auth.urlParams.gotoOnFail,!1;n=n?n:"authenticationFailed",t.sendEvent(e.EVENT_DISPLAY_MESSAGE_REQUEST,n)})}},{startEvent:e.EVENT_LOGOUT,description:"",dependencies:["org/forgerock/commons/ui/common/main/Router","org/forgerock/commons/ui/common/main/Configuration","org/forgerock/commons/ui/common/main/SessionManager"],processDescription:function(n,r,i,s){s.logout(function(){t.sendEvent(e.EVENT_DISPLAY_MESSAGE_REQUEST,"loggedOut"),t.sendEvent(e.EVENT_AUTHENTICATION_DATA_CHANGED,{anonymousMode:!0}),t.sendEvent(e.EVENT_CHANGE_VIEW,{route:r.configuration.routes.login}),delete i.gotoURL})}}];return n})